--[[
================================================================================
KOSMICMAZER ‚Äî DataStore Cleaner
================================================================================

Purpose: Removes all player data from DataStore (testing only)
Version: 1.1

Features:
- Removes player data from DataStore
- Provides safety warnings
- Designed for testing environments only
- Includes comprehensive error handling

API:
- cleanAllPlayerData(): Removes all player data

Calls to:
- DataStoreService: GetDataStore(), RemoveAsync()
- Players service: GetPlayers()

Called from:
- Manual execution for testing

Events:
- None (manual execution)

Dependencies:
- DataStoreService
- Players service

ChangeLog:
- Version 1.1: Added DEBUG_MODE check for production safety
- Version 1.0: Initial implementation for testing cleanup
- Added comprehensive safety warnings
- Enhanced with error handling and logging

================================================================================

WARNING: This script will delete ALL player data!
Only use in testing environment
--]]

local DataStoreService = game:GetService("DataStoreService")
local Players = game:GetService("Players")

-- Load GameConfig
local ServerScriptService = game:GetService("ServerScriptService")
local GameConfig = require(ServerScriptService:WaitForChild("GameConfig"))

-- Check if DEBUG_MODE is enabled
if not GameConfig.DEBUG_MODE then
    print("[DataCleaner] üîí DEBUG_MODE –≤–∏–º–∫–Ω–µ–Ω–æ - —Å–∫—Ä–∏–ø—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)")
    return
end

print("[DataCleaner] üß™ DEBUG_MODE –∞–∫—Ç–∏–≤–Ω–∏–π - –æ—á–∏—â—É–≤–∞—á –¥–æ—Å—Ç—É–ø–Ω–∏–π")

-- WARNING: This will delete ALL player data!
-- Only use in testing environment
local function cleanAllPlayerData()
    print("[DataCleaner] ‚ö†Ô∏è –£–í–ê–ì–ê: –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö –≥—Ä–∞–≤—Ü—ñ–≤!")
    
    local playerDataStore = DataStoreService:GetDataStore("PlayerData")
    
    for _, player in ipairs(Players:GetPlayers()) do
        local userId = tostring(player.UserId)
        
        local success, result = pcall(function()
            return playerDataStore:RemoveAsync(userId)
        end)
        
        if success then
            print("[DataCleaner] üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–æ –¥–∞–Ω—ñ:", player.Name, "ID:", userId)
        else
            warn("[DataCleaner] ‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –≤–∏–¥–∞–ª–∏—Ç–∏:", player.Name, "-", tostring(result))
        end
    end
    
    print("[DataCleaner] ‚úÖ –û—á–∏—â–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ")
end

-- Uncomment the line below to clean data (use with caution!)
-- cleanAllPlayerData()

print("[DataCleaner] üõ†Ô∏è –û—á–∏—â—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (–∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ)")