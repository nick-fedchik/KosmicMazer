--[[
================================================================================
KOSMICMAZER ‚Äî Space Station Load Order Configuration
================================================================================

Purpose: Defines the loading order for Space Station content
Version: 2.0

Features:
- Priority-based loading for Workspace objects
- Server scripts loading order (require/clone)
- Client scripts loading order
- Configurable timeout and verification settings

API:
- LoadOrder.GetWorkspacePriority(objectName): Returns priority for object
- LoadOrder.GetServerScriptPriority(scriptName): Returns priority for script
- LoadOrder.GetClientScriptPriority(scriptName): Returns priority for script
- LoadOrder.GetServerScriptAction(scriptName): Returns "require" or "clone"
- LoadOrder.SortObjects(objects): Returns sorted array by priority

Calls to:
- EnvironmentLoader: Reads this config during LoadSpaceEnvironment()
- LoadOrderProcessor: Processes this configuration

Called from:
- EnvironmentLoader.LoadSpaceEnvironment()

Dependencies:
- ServerStorage.Space.SpaceStation.Workspace
- ServerStorage.Space.SpaceStation.Scripts

ChangeLog:
- Version 2.0: Added ServerScripts, ClientScripts, Settings sections
- Version 1.0: Initial implementation (WorkspaceObjects only)

================================================================================
]]

--[[
================================================================================
–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø –ó –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
================================================================================

üìã –°–¢–†–£–ö–¢–£–†–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–á:

LoadOrder –≤–∏–∑–Ω–∞—á–∞—î –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç—Ä—å–æ—Ö —Ç–∏–ø—ñ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç—É:

1. WorkspaceObjects - –æ–±'—î–∫—Ç–∏ –∑ –ø–∞–ø–∫–∏ Workspace/
   –ö–æ–ø—ñ—é—é—Ç—å—Å—è –≤ game.Workspace –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

2. ServerScripts - —Å–∫—Ä–∏–ø—Ç–∏ –∑ –ø–∞–ø–∫–∏ Scripts/Server/
   ModuleScripts: action="require" (–∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —è–∫ –º–æ–¥—É–ª—ñ)
   Scripts: action="clone" (–∫–æ–ø—ñ—é—é—Ç—å—Å—è –≤ Workspace)

3. ClientScripts - —Å–∫—Ä–∏–ø—Ç–∏ –∑ –ø–∞–ø–∫–∏ Scripts/Client/
   –ö–æ–ø—ñ—é—é—Ç—å—Å—è –≤ StarterPlayerScripts –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è

‚öôÔ∏è –ü–†–ê–í–ò–õ–ê –ü–†–Ü–û–†–ò–¢–ï–¢–£:

–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –≤–∏–∑–Ω–∞—á–∞—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–º–µ–Ω—à–µ —á–∏—Å–ª–æ = —Ä–∞–Ω—ñ—à–µ):
- 1-100: –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Planet, –æ—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ)
- 101-500: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–±—É–¥—ñ–≤–ª—ñ, NPC, —ñ–≥—Ä–æ–≤–∞ –ª–æ–≥—ñ–∫–∞)
- 501-998: –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–¥–µ–∫–æ—Ä–∞—Ü—ñ—ó, –µ—Ñ–µ–∫—Ç–∏, UI)
- 999: –ö—Ä–∏—Ç–∏—á–Ω—ñ —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä–∏ (SpawnLocation - –ó–ê–í–ñ–î–ò –æ—Å—Ç–∞–Ω–Ω—ñ–º!)
- 500: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–¥–ª—è –æ–±'—î–∫—Ç—ñ–≤ –Ω–µ –≤–∫–∞–∑–∞–Ω–∏—Ö –≤ —Å–ø–∏—Å–∫—É)

‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:
SpawnLocation –ó–ê–í–ñ–î–ò –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ priority = 999 —â–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—å –æ—Å—Ç–∞–Ω–Ω—ñ–º!
–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î —â–æ —Ç–æ—á–∫–∞ —Å–ø–∞–≤–Ω—É —ñ—Å–Ω—É—î –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—å–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É.

üìù –Ø–ö –ù–ê–õ–ê–®–¢–£–í–ê–¢–ò:

1. –î–æ–¥–∞–π—Ç–µ –æ–±'—î–∫—Ç –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—ó —Å–µ–∫—Ü—ñ—ó (WorkspaceObjects/ServerScripts/ClientScripts)
2. –í–∫–∞–∂—ñ—Ç—å –Ω–∞–∑–≤—É –æ–±'—î–∫—Ç–∞ (name)
3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (priority) –∑–≥—ñ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª –≤–∏—â–µ
4. –î–ª—è ServerScripts –≤–∫–∞–∂—ñ—Ç—å –¥—ñ—é (action): "require" –∞–±–æ "clone"
5. –î–æ–¥–∞–π—Ç–µ –æ–ø–∏—Å (description) –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

–ü–†–ò–ö–õ–ê–î:
{name = "PlanetSurfaceScanner", priority = 2, description = "–°–∫–∞–Ω–µ—Ä –ø–æ–≤–µ—Ä—Ö–Ω—ñ –ø–ª–∞–Ω–µ—Ç–∏"},

üîß SETTINGS (–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è):
- LoadTimeout: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (—Å–µ–∫—É–Ω–¥–∏)
- EnableParallelLoading: –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
- VerifyAfterLoad: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

üìö –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: ReplicatedStorage/Docs/LoadOrderSystem.luau

================================================================================
]]

local LoadOrder = {}

LoadOrder.Version = "2.0"

-- –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –∑ SpaceStation/Workspace/ ‚Üí game.Workspace
LoadOrder.WorkspaceObjects = {
	{name = "Planet", priority = 1, description = "Planet visual model"},
	{name = "PlanetSurfaceScanner", priority = 2, description = "Scanner tool (optional)"},
	{name = "SpawnLocation", priority = 999, description = "Player spawn point (must load last)"},
	-- Add more objects here with their priorities
}

-- –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑ SpaceStation/Scripts/Server/
LoadOrder.ServerScripts = {
	{name = "PlanetSurfaceScanner", priority = 1, action = "require", description = "Scanner module"},
	-- ModuleScripts: action = "require" (loaded as modules)
	-- Scripts: action = "clone" (copied to Workspace)
	-- Add more scripts here
}

-- –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑ SpaceStation/Scripts/Client/ ‚Üí StarterPlayerScripts
LoadOrder.ClientScripts = {
	{name = "StationUI", priority = 1, description = "Station UI controller"},
	{name = "ScannerUI", priority = 2, description = "Scanner interface"},
	-- Add more client scripts here
}

-- –ó–∞–≥–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
LoadOrder.Settings = {
	LoadTimeout = 10,  -- Maximum time to wait for loading (seconds)
	EnableParallelLoading = false,  -- Load items in parallel (experimental)
	VerifyAfterLoad = true,  -- Verify all objects loaded successfully
}

-- Helper function to get priority for a Workspace object
function LoadOrder.GetWorkspacePriority(objectName: string): number
	for _, entry in ipairs(LoadOrder.WorkspaceObjects) do
		if entry.name == objectName then
			return entry.priority
		end
	end
	return 500  -- Default priority for unlisted objects
end

-- Helper function to get priority for a Server script
function LoadOrder.GetServerScriptPriority(scriptName: string): number
	for _, entry in ipairs(LoadOrder.ServerScripts) do
		if entry.name == scriptName then
			return entry.priority
		end
	end
	return 500
end

-- Helper function to get priority for a Client script
function LoadOrder.GetClientScriptPriority(scriptName: string): number
	for _, entry in ipairs(LoadOrder.ClientScripts) do
		if entry.name == scriptName then
			return entry.priority
		end
	end
	return 500
end

-- Helper function to get script action (require/clone)
function LoadOrder.GetServerScriptAction(scriptName: string): string
	for _, entry in ipairs(LoadOrder.ServerScripts) do
		if entry.name == scriptName then
			return entry.action or "require"  -- Default to require
		end
	end
	return "require"
end

-- Legacy compatibility: alias for WorkspaceObjects
LoadOrder.ORDER = LoadOrder.WorkspaceObjects
LoadOrder.GetPriority = LoadOrder.GetWorkspacePriority

return LoadOrder
