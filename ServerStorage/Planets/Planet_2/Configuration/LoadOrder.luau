--[[
================================================================================
KOSMICMAZER ‚Äî Planet Load Order Configuration
================================================================================

Purpose: Defines the loading order for Planet-level content
Version: 2.0
Planet: Planet_1 (–ó–∞–ª—ñ–∑—è–∫–∞)

Features:
- Priority-based loading for Planet Workspace objects
- Planet-wide server scripts loading order
- Planet-wide client scripts loading order
- Configurable timeout and verification settings

API:
- LoadOrder.GetWorkspacePriority(objectName): Returns priority for object
- LoadOrder.GetServerScriptPriority(scriptName): Returns priority for script
- LoadOrder.GetClientScriptPriority(scriptName): Returns priority for script
- LoadOrder.GetServerScriptAction(scriptName): Returns "require" or "clone"
- LoadOrder.SortObjects(objects): Returns sorted array by priority

Calls to:
- EnvironmentLoader: Reads this config during LoadPlanetEnvironment()
- LoadOrderProcessor: Processes this configuration

Called from:
- EnvironmentLoader.LoadPlanetEnvironment()
- EnvironmentLoader.LoadSpaceEnvironment()

Dependencies:
- ServerStorage.Planets.Planet_1.Workspace
- ServerStorage.Planets.Planet_1.Scripts

ChangeLog:
- Version 2.0: Added ServerScripts, ClientScripts, Settings sections
- Version 1.0: Initial implementation

================================================================================
]]

--[[
================================================================================
–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø –ó –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
================================================================================

üìã –°–¢–†–£–ö–¢–£–†–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–á:

LoadOrder –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–ª–∞–Ω–µ—Ç–∏ –≤–∏–∑–Ω–∞—á–∞—î –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:

1. WorkspaceObjects - –æ–±'—î–∫—Ç–∏ –∑ –ø–∞–ø–∫–∏ Planet/Workspace/
   –ü—Ä–∏–∫–ª–∞–¥: –º–æ–¥–µ–ª—å –ø–ª–∞–Ω–µ—Ç–∏, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞

2. ServerScripts - –∑–∞–≥–∞–ª—å–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –ø–ª–∞–Ω–µ—Ç–∏ –∑ Scripts/Server/
   –î–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è –í–°–Ü–• –ª–æ–∫–∞—Ü—ñ–π —Ü—ñ—î—ó –ø–ª–∞–Ω–µ—Ç–∏
   –ü—Ä–∏–∫–ª–∞–¥: PlanetConfig, PlanetManager

3. ClientScripts - –∑–∞–≥–∞–ª—å–Ω—ñ –∫–ª—ñ—î–Ω—Ç—Å—å–∫—ñ —Å–∫—Ä–∏–ø—Ç–∏ –∑ Scripts/Client/
   –ö–æ–ø—ñ—é—é—Ç—å—Å—è –¥–ª—è –≤—Å—ñ—Ö –≥—Ä–∞–≤—Ü—ñ–≤ –Ω–∞ —Ü—ñ–π –ø–ª–∞–Ω–µ—Ç—ñ
   –ü—Ä–∏–∫–ª–∞–¥: PlanetUI, PlanetEffects

‚öôÔ∏è –ü–†–ê–í–ò–õ–ê –ü–†–Ü–û–†–ò–¢–ï–¢–£:

- 1-100: –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–æ–¥–µ–ª—å –ø–ª–∞–Ω–µ—Ç–∏, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞)
- 101-500: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- 501-998: –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- 999: –ó–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä—ñ–≤
- 500: –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

üîÑ –ü–û–°–õ–Ü–î–û–í–ù–Ü–°–¢–¨ –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø:

1. Planet LoadOrder –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ü–ï–†–ï–î Location LoadOrder
2. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î —â–æ PlanetConfig –¥–æ—Å—Ç—É–ø–Ω–∏–π –¥–ª—è LocationGameServer
3. –ö–ª—ñ—î–Ω—Ç—Å—å–∫—ñ —Å–∫—Ä–∏–ø—Ç–∏ –ø–ª–∞–Ω–µ—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –ª–æ–∫–∞—Ü—ñ—ó

üìù –Ø–ö –ù–ê–õ–ê–®–¢–£–í–ê–¢–ò:

1. WorkspaceObjects:
   {name = "Planet", priority = 1, description = "–ú–æ–¥–µ–ª—å –ø–ª–∞–Ω–µ—Ç–∏"}

2. ServerScripts:
   {name = "PlanetConfig", priority = 1, action = "require", description = "–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø–ª–∞–Ω–µ—Ç–∏"}

3. ClientScripts:
   {name = "PlanetUI", priority = 1, description = "UI –ø–ª–∞–Ω–µ—Ç–∏"}

‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:
- –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç ServerScripts –º–∞—î –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º—ñ–∂ –º–æ–¥—É–ª—è–º–∏
- –Ø–∫—â–æ LocationGameServer –ø–æ—Ç—Ä–µ–±—É—î PlanetConfig, –¥–∞–π—Ç–µ PlanetConfig –Ω–∏–∂—á–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

üìö –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: ReplicatedStorage/Docs/LoadOrderSystem.luau

================================================================================
]]

local LoadOrder = {}

LoadOrder.Version = "2.0"

-- –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –∑ Planet/Workspace/ ‚Üí game.Workspace
LoadOrder.WorkspaceObjects = {
	{name = "Planet", priority = 1, description = "Planet visual model"},
	-- Add more planet-level objects here
}

-- –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑ Planet/Scripts/Server/
LoadOrder.ServerScripts = {
	{name = "PlanetConfig", priority = 1, action = "require", description = "Planet game rules & resources"},
	{name = "PlanetManager", priority = 2, action = "require", description = "Planet controller"},
	-- ModuleScripts: action = "require" (loaded as modules)
	-- Scripts: action = "clone" (copied to Workspace)
	-- Add more scripts here
}

-- –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ –∑ Planet/Scripts/Client/ ‚Üí StarterPlayerScripts
LoadOrder.ClientScripts = {
	{name = "PlanetUI", priority = 1, description = "Planet-wide UI controller"},
	{name = "PlanetEffects", priority = 2, description = "Planet-specific visual effects"},
	-- Add more client scripts here
}

-- –ó–∞–≥–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
LoadOrder.Settings = {
	LoadTimeout = 10,  -- Maximum time to wait for loading (seconds)
	EnableParallelLoading = false,  -- Load items in parallel (experimental)
	VerifyAfterLoad = true,  -- Verify all objects loaded successfully
}

-- Helper function to get priority for a Workspace object
function LoadOrder.GetWorkspacePriority(objectName: string): number
	for _, entry in ipairs(LoadOrder.WorkspaceObjects) do
		if entry.name == objectName then
			return entry.priority
		end
	end
	return 500  -- Default priority for unlisted objects
end

-- Helper function to get priority for a Server script
function LoadOrder.GetServerScriptPriority(scriptName: string): number
	for _, entry in ipairs(LoadOrder.ServerScripts) do
		if entry.name == scriptName then
			return entry.priority
		end
	end
	return 500
end

-- Helper function to get priority for a Client script
function LoadOrder.GetClientScriptPriority(scriptName: string): number
	for _, entry in ipairs(LoadOrder.ClientScripts) do
		if entry.name == scriptName then
			return entry.priority
		end
	end
	return 500
end

-- Helper function to get script action (require/clone)
function LoadOrder.GetServerScriptAction(scriptName: string): string
	for _, entry in ipairs(LoadOrder.ServerScripts) do
		if entry.name == scriptName then
			return entry.action or "require"  -- Default to require
		end
	end
	return "require"
end

-- Helper function to sort objects by load order
function LoadOrder.SortObjects(objects: {Instance}): {Instance}
	local sorted = {}
	for _, obj in ipairs(objects) do
		table.insert(sorted, obj)
	end

	table.sort(sorted, function(a, b)
		return LoadOrder.GetWorkspacePriority(a.Name) < LoadOrder.GetWorkspacePriority(b.Name)
	end)

	return sorted
end

-- Legacy compatibility: alias for WorkspaceObjects
LoadOrder.ORDER = LoadOrder.WorkspaceObjects
LoadOrder.GetPriority = LoadOrder.GetWorkspacePriority

return LoadOrder
