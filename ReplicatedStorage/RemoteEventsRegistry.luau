--[[
================================================================================
KOSMICMAZER ‚Äî RemoteEvents Registry
================================================================================

Purpose: –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ä–µ—î—Å—Ç—Ä RemoteEvents –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
Version: 1.0
Status: ACTIVE
Last Updated: 2026-01-08

–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö RemoteEvents –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- –ù–∞–¥–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ RemoteEvents –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞ —Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è RemoteEvents –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ

–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞:
‚úÖ RemoteEvents —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –í–ò–ö–õ–Æ–ß–ù–û —á–µ—Ä–µ–∑ Initialize() –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
‚úÖ –ö–ª—ñ—î–Ω—Ç—Å—å–∫—ñ —Å–∫—Ä–∏–ø—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å WaitFor() –∞–±–æ WaitForChild()
‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å Get() –ø—ñ—Å–ª—è Initialize()
‚ùå –ù—ñ–∫–æ–ª–∏ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ RemoteEvents –ø–æ–∑–∞ —Ü–∏–º –º–æ–¥—É–ª–µ–º

================================================================================
]]

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local RemoteEventsRegistry = {}

-- –¢–∞–±–ª–∏—Ü—ñ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è RemoteEvents —Ç–∞ RemoteFunctions
RemoteEventsRegistry.Events = {}
RemoteEventsRegistry.Functions = {}

-- –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö RemoteEvents, —è–∫—ñ –º–∞—é—Ç—å –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ
local REMOTE_EVENTS_LIST = {
	"TeleportationEvent",           -- –ó–∞–ø–∏—Ç –Ω–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü—ñ—é –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞
	"TeleportationStateEvent",      -- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü—ñ—ó –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞
	"PlanetSurfaceScanner_Results", -- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –ø–ª–∞–Ω–µ—Ç–∏
	"PlayerDataReady",              -- –°–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö –≥—Ä–∞–≤—Ü—è
}

-- –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö RemoteFunctions (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É)
local REMOTE_FUNCTIONS_LIST = {
	-- –ü–æ–∫–∏ —â–æ –ø—É—Å—Ç–æ, –¥–æ–¥–∞–≤–∞—Ç–∏ –ø–æ –ø–æ—Ç—Ä–µ–±—ñ
}

-- –ü—Ä–∞–ø–æ—Ä–µ—Ü—å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
local isInitialized = false

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: Initialize
================================================================================
–°—Ç–≤–æ—Ä—é—î –≤—Å—ñ RemoteEvents —Ç–∞ RemoteFunctions –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.
–í–ò–ö–õ–ò–ö–ê–Ñ–¢–¨–°–Ø: –¢—ñ–ª—å–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ, –≤ GameInit.server.luau

–ü–æ–≤–µ—Ä—Ç–∞—î: success (boolean), errorMessage (string?)
]]
function RemoteEventsRegistry.Initialize()
	-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: Initialize –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
	if not RunService:IsServer() then
		warn("[RemoteEventsRegistry] ‚ùå Initialize() –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ!")
		return false, "Initialize() –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ"
	end

	-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: Initialize –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
	if isInitialized then
		warn("[RemoteEventsRegistry] ‚ö†Ô∏è Initialize() –≤–∂–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ —Ä–∞–Ω—ñ—à–µ")
		return true -- –ù–µ –ø–æ–º–∏–ª–∫–∞, –ø—Ä–æ—Å—Ç–æ –≤–∂–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
	end

	print("[RemoteEventsRegistry] üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è RemoteEvents...")

	-- –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—Å—ñ RemoteEvents
	local eventsCreated = 0
	for _, eventName in ipairs(REMOTE_EVENTS_LIST) do
		-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –≤–∂–µ —ñ—Å–Ω—É—î
		local existingEvent = ReplicatedStorage:FindFirstChild(eventName)
		if existingEvent then
			if existingEvent:IsA("RemoteEvent") then
				print(string.format("[RemoteEventsRegistry] ‚ôªÔ∏è RemoteEvent '%s' –≤–∂–µ —ñ—Å–Ω—É—î - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —ñ—Å–Ω—É—é—á–∏–π", eventName))
				RemoteEventsRegistry.Events[eventName] = existingEvent
				eventsCreated = eventsCreated + 1
			else
				warn(string.format("[RemoteEventsRegistry] ‚ùå –û–±'—î–∫—Ç '%s' —ñ—Å–Ω—É—î, –∞–ª–µ —Ü–µ –Ω–µ RemoteEvent!", eventName))
				return false, string.format("–û–±'—î–∫—Ç '%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø", eventName)
			end
		else
			-- –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π RemoteEvent
			local newEvent = Instance.new("RemoteEvent")
			newEvent.Name = eventName
			newEvent.Parent = ReplicatedStorage

			RemoteEventsRegistry.Events[eventName] = newEvent
			eventsCreated = eventsCreated + 1
			print(string.format("[RemoteEventsRegistry] ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ RemoteEvent: %s", eventName))
		end
	end

	-- –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—Å—ñ RemoteFunctions (—è–∫—â–æ —î)
	local functionsCreated = 0
	for _, functionName in ipairs(REMOTE_FUNCTIONS_LIST) do
		local existingFunction = ReplicatedStorage:FindFirstChild(functionName)
		if existingFunction then
			if existingFunction:IsA("RemoteFunction") then
				print(string.format("[RemoteEventsRegistry] ‚ôªÔ∏è RemoteFunction '%s' –≤–∂–µ —ñ—Å–Ω—É—î - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é —ñ—Å–Ω—É—é—á–∏–π", functionName))
				RemoteEventsRegistry.Functions[functionName] = existingFunction
				functionsCreated = functionsCreated + 1
			else
				warn(string.format("[RemoteEventsRegistry] ‚ùå –û–±'—î–∫—Ç '%s' —ñ—Å–Ω—É—î, –∞–ª–µ —Ü–µ –Ω–µ RemoteFunction!", functionName))
				return false, string.format("–û–±'—î–∫—Ç '%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø", functionName)
			end
		else
			local newFunction = Instance.new("RemoteFunction")
			newFunction.Name = functionName
			newFunction.Parent = ReplicatedStorage

			RemoteEventsRegistry.Functions[functionName] = newFunction
			functionsCreated = functionsCreated + 1
			print(string.format("[RemoteEventsRegistry] ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ RemoteFunction: %s", functionName))
		end
	end

	isInitialized = true
	print(string.format("[RemoteEventsRegistry] üéâ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! Events: %d, Functions: %d", eventsCreated, functionsCreated))

	return true
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: Get
================================================================================
–û—Ç—Ä–∏–º–∞—Ç–∏ RemoteEvent –∞–±–æ RemoteFunction –∑–∞ —ñ–º'—è–º.
–í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø: –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ø—ñ—Å–ª—è Initialize()

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:
- eventName (string): –Ü–º'—è RemoteEvent –∞–±–æ RemoteFunction

–ü–æ–≤–µ—Ä—Ç–∞—î: RemoteEvent | RemoteFunction | nil
]]
function RemoteEventsRegistry.Get(eventName: string)
	-- –°–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞—Ç–∏ –≤ Events
	if RemoteEventsRegistry.Events[eventName] then
		return RemoteEventsRegistry.Events[eventName]
	end

	-- –ü–æ—Ç—ñ–º —à—É–∫–∞—Ç–∏ –≤ Functions
	if RemoteEventsRegistry.Functions[eventName] then
		return RemoteEventsRegistry.Functions[eventName]
	end

	-- –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ - —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–∞–π—Ç–∏ –≤ ReplicatedStorage
	local remote = ReplicatedStorage:FindFirstChild(eventName)
	if remote and (remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction")) then
		-- –ö–µ—à—É–≤–∞—Ç–∏ –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
		if remote:IsA("RemoteEvent") then
			RemoteEventsRegistry.Events[eventName] = remote
		else
			RemoteEventsRegistry.Functions[eventName] = remote
		end
		return remote
	end

	warn(string.format("[RemoteEventsRegistry] ‚ùå RemoteEvent/Function '%s' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!", eventName))
	return nil
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: WaitFor
================================================================================
–û—á—ñ–∫—É–≤–∞—Ç–∏ RemoteEvent –∞–±–æ RemoteFunction (–¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞).
–í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø: –ù–∞ –∫–ª—ñ—î–Ω—Ç—ñ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è RemoteEvent

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:
- eventName (string): –Ü–º'—è RemoteEvent –∞–±–æ RemoteFunction
- timeout (number?): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 30)

–ü–æ–≤–µ—Ä—Ç–∞—î: RemoteEvent | RemoteFunction | nil
]]
function RemoteEventsRegistry.WaitFor(eventName: string, timeout: number?)
	local maxTimeout = timeout or 30
	local startTime = tick()

	print(string.format("[RemoteEventsRegistry] ‚è≥ –û—á—ñ–∫—É–≤–∞–Ω–Ω—è '%s' (timeout: %ds)...", eventName, maxTimeout))

	-- –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–∞–π—Ç–∏ –≤ –∫–µ—à—ñ
	local cached = RemoteEventsRegistry.Get(eventName)
	if cached then
		print(string.format("[RemoteEventsRegistry] ‚úÖ '%s' –∑–Ω–∞–π–¥–µ–Ω–æ –≤ –∫–µ—à—ñ", eventName))
		return cached
	end

	-- –û—á—ñ–∫—É–≤–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ ReplicatedStorage
	local remote = ReplicatedStorage:WaitForChild(eventName, maxTimeout)

	if remote then
		-- –ö–µ—à—É–≤–∞—Ç–∏ –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
		if remote:IsA("RemoteEvent") then
			RemoteEventsRegistry.Events[eventName] = remote
		elseif remote:IsA("RemoteFunction") then
			RemoteEventsRegistry.Functions[eventName] = remote
		end

		local elapsedTime = tick() - startTime
		print(string.format("[RemoteEventsRegistry] ‚úÖ '%s' –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ %.2fs", eventName, elapsedTime))
		return remote
	else
		warn(string.format("[RemoteEventsRegistry] ‚ùå Timeout! '%s' –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ %ds", eventName, maxTimeout))
		return nil
	end
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: Validate
================================================================================
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö RemoteEvents.
–í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø: –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ø—ñ—Å–ª—è Initialize() –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ–≤–µ—Ä—Ç–∞—î: valid (boolean), errors (table)
]]
function RemoteEventsRegistry.Validate()
	local valid = true
	local errors = {}

	print("[RemoteEventsRegistry] üîç –í–∞–ª—ñ–¥–∞—Ü—ñ—è RemoteEvents...")

	-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Events
	for _, eventName in ipairs(REMOTE_EVENTS_LIST) do
		local event = RemoteEventsRegistry.Events[eventName]
		if not event then
			valid = false
			table.insert(errors, string.format("RemoteEvent '%s' –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ", eventName))
			warn(string.format("[RemoteEventsRegistry] ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ–π RemoteEvent: %s", eventName))
		else
			-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ü–µ —Å–ø—Ä–∞–≤–¥—ñ RemoteEvent
			if not event:IsA("RemoteEvent") then
				valid = false
				table.insert(errors, string.format("'%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø: %s", eventName, event.ClassName))
				warn(string.format("[RemoteEventsRegistry] ‚ùå '%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø: %s", eventName, event.ClassName))
			else
				print(string.format("[RemoteEventsRegistry] ‚úÖ RemoteEvent '%s' –≤–∞–ª—ñ–¥–Ω–∏–π", eventName))
			end
		end
	end

	-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Functions
	for _, functionName in ipairs(REMOTE_FUNCTIONS_LIST) do
		local func = RemoteEventsRegistry.Functions[functionName]
		if not func then
			valid = false
			table.insert(errors, string.format("RemoteFunction '%s' –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ", functionName))
			warn(string.format("[RemoteEventsRegistry] ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ–π RemoteFunction: %s", functionName))
		else
			if not func:IsA("RemoteFunction") then
				valid = false
				table.insert(errors, string.format("'%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø: %s", functionName, func.ClassName))
				warn(string.format("[RemoteEventsRegistry] ‚ùå '%s' –º–∞—î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø: %s", functionName, func.ClassName))
			else
				print(string.format("[RemoteEventsRegistry] ‚úÖ RemoteFunction '%s' –≤–∞–ª—ñ–¥–Ω–∏–π", functionName))
			end
		end
	end

	if valid then
		print("[RemoteEventsRegistry] üéâ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π–¥–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!")
	else
		warn(string.format("[RemoteEventsRegistry] ‚ùå –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞! –ü–æ–º–∏–ª–æ–∫: %d", #errors))
	end

	return valid, errors
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: IsInitialized
================================================================================
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ä–µ—î—Å—Ç—Ä.

–ü–æ–≤–µ—Ä—Ç–∞—î: boolean
]]
function RemoteEventsRegistry.IsInitialized()
	return isInitialized
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: GetAllEvents
================================================================================
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö RemoteEvents (–¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏).

–ü–æ–≤–µ—Ä—Ç–∞—î: table
]]
function RemoteEventsRegistry.GetAllEvents()
	local eventsList = {}
	for eventName, _ in pairs(RemoteEventsRegistry.Events) do
		table.insert(eventsList, eventName)
	end
	return eventsList
end

--[[
================================================================================
–§–£–ù–ö–¶–Ü–Ø: GetAllFunctions
================================================================================
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö RemoteFunctions (–¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏).

–ü–æ–≤–µ—Ä—Ç–∞—î: table
]]
function RemoteEventsRegistry.GetAllFunctions()
	local functionsList = {}
	for functionName, _ in pairs(RemoteEventsRegistry.Functions) do
		table.insert(functionsList, functionName)
	end
	return functionsList
end

return RemoteEventsRegistry
